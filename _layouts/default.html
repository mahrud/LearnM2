<!DOCTYPE html>
<html lang="en-us">
{% include head.html %}
  <body class="theme-base-{{ site.color-scheme }}">
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <!--
              <h3 class="masthead-title">
              <a href="{{ site.baseurl }}/">{{ site.title | newline_to_br }}</a><br />
              <small>{{ site.tagline }}</small>
              </h3>
          -->
          <table class="buttons">
            <tr>
              <td>
                <div>
                  <!-- FIXME -->
                  <a href="{{ page.next     }}">next    </a> |
                  <a href="{{ page.previous }}">previous</a> |
                  <a href="{{ page.forward  }}">forward </a> |
                  <a href="{{ page.backward }}">backward</a> |
                  <a href="{{ page.up       }}">up      </a> |
                  <a href="{{ site.baseurl  }}/">top    </a> |
                  <a href="{{ site.baseurl  }}/master.html">index</a> |
                  <a href="{{ site.baseurl  }}/toc.html">toc</a> |
                  <a href="/">Macaulay2 web site</a>
                </div>
              </td>
            </tr>
          </table>
          {%- if page.path != "404.md" %}
          <div>
            <a href="index.html" title="{{ page.description }}">{{ page.title }}</a> ::
            <a href="index.html" title="{{ page.description }}">{{ page.title }}</a>
          </div>
          {%- endif %}
          <hr />
        </div>
      </div>

      <div class="container content" id="main">
<!-- ########################################################################################### -->
{{ content }}
<!-- ########################################################################################### -->
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
    // Highlight search Query
    var url = window.location.href;
    if (url.lastIndexOf("?q=") > 0) {
      // get the index of the parameter, add three (to account for length)
      var stringloc = url.lastIndexOf("?q=") + 3;
      // get the substring (query) and decode
      var searchquery = decodeURIComponent(url.substr(stringloc));
      // regex matches at beginning of line, end of line or word boundary, useful for poetry
      var regex = new RegExp("(?:^|\\b)(" + searchquery + ")(?:$|\\b)", "gim");
      // get, add mark and then set content
      var content = document.getElementById("main").innerHTML;
      document.getElementById("main").innerHTML = content.replace(regex, "<mark>$1</mark>");
    }

    // Toggle sidebar
    (function(document) {
      var toggle = document.querySelector('.sidebar-toggle');
      var sidebar = document.querySelector('#sidebar');
      var checkbox = document.querySelector('#sidebar-checkbox');

      document.addEventListener('click', function(e) {
        var target = e.target;

        if(!checkbox.checked ||
           !sidebar.contains(target) ||
           (target === checkbox || target === toggle)) return;

        checkbox.checked = false;
      }, false);
    })(document);
    </script>

  </body>
</html>
